{
  "version": 3,
  "sources": [
    "Keyboard.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "event",
    "IEventHandler",
    "IDisposable",
    "construct",
    "manager",
    "__manager",
    "__window",
    "getWindow",
    "Environment",
    "get",
    "__root",
    "document",
    "documentElement",
    "__lastUpDownType",
    "_initKeyObserver",
    "statics",
    "PRIORITY",
    "Registration",
    "PRIORITY_NORMAL",
    "SUPPORTED_TYPES",
    "keyup",
    "keydown",
    "keypress",
    "keyinput",
    "TARGET_CHECK",
    "TARGET_DOMNODE",
    "IGNORE_CAN_HANDLE",
    "members",
    "__onKeyUpDownWrapper",
    "__lastKeyCode",
    "__inputListeners",
    "__onKeyPressWrapper",
    "canHandleEvent",
    "target",
    "type",
    "registerEvent",
    "capture",
    "unregisterEvent",
    "_fireInputEvent",
    "domEvent",
    "charCode",
    "__getEventTarget",
    "offsetWidth",
    "createEvent",
    "KeyInput",
    "dispatchEvent",
    "fireEvent",
    "Data",
    "_fireSequenceEvent",
    "keyIdentifier",
    "keyCode",
    "KeySequence",
    "getDefaultPrevented",
    "util",
    "Keyboard",
    "isNonPrintableKeyCode",
    "_emulateKeyPress",
    "focusHandler",
    "getHandler",
    "handler",
    "Focus",
    "getActive",
    "getFocus",
    "body",
    "lang",
    "Function",
    "listener",
    "__onKeyUpDown",
    "__onKeyPress",
    "Event",
    "bom",
    "addNativeListener",
    "_stopKeyObserver",
    "removeNativeListener",
    "key",
    "callback",
    "GlobalError",
    "observeMethod",
    "select",
    "window",
    "_idealKeyHandler",
    "kbUtil",
    "keyCodeToIdentifier",
    "charCodeToIdentifier",
    "__firefoxInputFix",
    "tagName",
    "toLowerCase",
    "getAttribute",
    "hash",
    "ObjectRegistry",
    "toHashCode",
    "self",
    "stopPropagation",
    "_charCode2KeyCode",
    "keyCodeToIdentifierMap",
    "eventType",
    "_identifierToKeyCode",
    "identifierToKeyCodeMap",
    "charCodeAt",
    "destruct",
    "defer",
    "addHandler"
  ],
  "mappings": "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",
  "file": "Keyboard.js",
  "sourcesContent": [
    "\n/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n     * Andreas Ecker (ecker)\n     * Fabian Jakobs (fjakobs)\n\n************************************************************************ */\n\n/**\n * This class provides unified key event handler for Internet Explorer,\n * Firefox, Opera and Safari.\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n * @require(qx.event.handler.UserAction)\n */\nqx.Class.define(\"qx.event.handler.Keyboard\",\n{\n  extend : qx.core.Object,\n  implement : [ qx.event.IEventHandler, qx.core.IDisposable ],\n\n\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * Create a new instance\n   *\n   * @param manager {qx.event.Manager} Event manager for the window to use\n   */\n  construct : function(manager)\n  {\n    this.base(arguments);\n\n    // Define shorthands\n    this.__manager = manager;\n    this.__window = manager.getWindow();\n\n    // Gecko ignores key events when not explicitly clicked in the document.\n    if ((qx.core.Environment.get(\"engine.name\") == \"gecko\")) {\n      this.__root = this.__window;\n    } else {\n      this.__root = this.__window.document.documentElement;\n    }\n\n    // Internal sequence cache\n    this.__lastUpDownType = {};\n\n    // Initialize observer\n    this._initKeyObserver();\n  },\n\n\n\n\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /** @type {Integer} Priority of this handler */\n    PRIORITY : qx.event.Registration.PRIORITY_NORMAL,\n\n\n    /** @type {Map} Supported event types */\n    SUPPORTED_TYPES :\n    {\n      keyup : 1,\n      keydown : 1,\n      keypress : 1,\n      keyinput : 1\n    },\n\n\n    /** @type {Integer} Which target check to use */\n    TARGET_CHECK : qx.event.IEventHandler.TARGET_DOMNODE,\n\n\n    /** @type {Integer} Whether the method \"canHandleEvent\" must be called */\n    IGNORE_CAN_HANDLE : true\n  },\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n\n    __onKeyUpDownWrapper  : null,\n    __manager : null,\n    __window : null,\n    __root : null,\n    __lastUpDownType : null,\n    __lastKeyCode : null,\n    __inputListeners : null,\n    __onKeyPressWrapper : null,\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT HANDLER INTERFACE\n    ---------------------------------------------------------------------------\n    */\n\n    // interface implementation\n    canHandleEvent : function(target, type) {},\n\n\n    // interface implementation\n    registerEvent : function(target, type, capture) {\n      // Nothing needs to be done here\n    },\n\n\n    // interface implementation\n    unregisterEvent : function(target, type, capture) {\n      // Nothing needs to be done here\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      HELPER\n    ---------------------------------------------------------------------------\n    */\n\n\n    /**\n     * Fire a key input event with the given parameters\n     *\n     * @param domEvent {Event} DOM event\n     * @param charCode {Integer} character code\n     */\n    _fireInputEvent : function(domEvent, charCode)\n    {\n      var target = this.__getEventTarget();\n\n      // Only fire when target is defined and visible\n      if (target && target.offsetWidth != 0)\n      {\n        var event = qx.event.Registration.createEvent(\"keyinput\", qx.event.type.KeyInput, [domEvent, target, charCode]);\n        this.__manager.dispatchEvent(target, event);\n      }\n\n      // Fire user action event\n      // Needs to check if still alive first\n      if (this.__window) {\n        qx.event.Registration.fireEvent(this.__window, \"useraction\", qx.event.type.Data, [\"keyinput\"]);\n      }\n    },\n\n\n    /**\n     * Fire a key up/down/press event with the given parameters\n     *\n     * @param domEvent {Event} DOM event\n     * @param type {String} type og the event\n     * @param keyIdentifier {String} key identifier\n     */\n    _fireSequenceEvent : function(domEvent, type, keyIdentifier)\n    {\n      var target = this.__getEventTarget();\n      var keyCode = domEvent.keyCode;\n\n      // Fire key event\n      var event = qx.event.Registration.createEvent(type, qx.event.type.KeySequence, [domEvent, target, keyIdentifier]);\n      this.__manager.dispatchEvent(target, event);\n\n      // IE and Safari suppress a \"keypress\" event if the \"keydown\" event's\n      // default action was prevented. In this case we emulate the \"keypress\"\n      //\n      // FireFox suppresses \"keypress\" when \"keydown\" default action is prevented.\n      // from version 29: https://bugzilla.mozilla.org/show_bug.cgi?id=935876.\n      if (event.getDefaultPrevented() && type == \"keydown\") {\n        if (qx.core.Environment.get(\"engine.name\") == \"mshtml\" ||\n            qx.core.Environment.get(\"engine.name\") == \"webkit\" ||\n            (qx.core.Environment.get(\"engine.name\") == \"gecko\" && qx.core.Environment.get(\"browser.version\") >= 29)) {\n\n          // some key press events are already emulated. Ignore these events.\n          if (!qx.event.util.Keyboard.isNonPrintableKeyCode(keyCode) && !this._emulateKeyPress[keyCode]) {\n            this._fireSequenceEvent(domEvent, \"keypress\", keyIdentifier);\n          }\n        }\n      }\n      \n      // Fire user action event\n      // Needs to check if still alive first\n      if (this.__window) {\n        qx.event.Registration.fireEvent(this.__window, \"useraction\", qx.event.type.Data, [type]);\n      }\n    },\n\n\n    /**\n     * Get the target element for key events\n     *\n     * @return {Element} the event target element\n     */\n    __getEventTarget : function()\n    {\n      var focusHandler = this.__manager.getHandler(qx.event.handler.Focus);\n      var target = focusHandler.getActive();\n\n      // Fallback to focused element when active is null or invisible\n      if (!target || target.offsetWidth == 0) {\n        target = focusHandler.getFocus();\n      }\n\n      // Fallback to body when focused is null or invisible\n      if (!target || target.offsetWidth == 0) {\n        target = this.__manager.getWindow().document.body;\n      }\n\n      return target;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      OBSERVER INIT/STOP\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Initializes the native key event listeners.\n     *\n     * @signature function()\n     */\n    _initKeyObserver : function()\n    {\n      this.__onKeyUpDownWrapper = qx.lang.Function.listener(this.__onKeyUpDown, this);\n      this.__onKeyPressWrapper = qx.lang.Function.listener(this.__onKeyPress, this);\n\n      var Event = qx.bom.Event;\n\n      Event.addNativeListener(this.__root, \"keyup\", this.__onKeyUpDownWrapper);\n      Event.addNativeListener(this.__root, \"keydown\", this.__onKeyUpDownWrapper);\n      Event.addNativeListener(this.__root, \"keypress\", this.__onKeyPressWrapper);\n    },\n\n\n    /**\n     * Stops the native key event listeners.\n     *\n     * @signature function()\n     */\n    _stopKeyObserver : function()\n    {\n      var Event = qx.bom.Event;\n\n      Event.removeNativeListener(this.__root, \"keyup\", this.__onKeyUpDownWrapper);\n      Event.removeNativeListener(this.__root, \"keydown\", this.__onKeyUpDownWrapper);\n      Event.removeNativeListener(this.__root, \"keypress\", this.__onKeyPressWrapper);\n\n      for (var key in (this.__inputListeners || {}))\n      {\n        var listener = this.__inputListeners[key];\n        Event.removeNativeListener(listener.target, \"keypress\", listener.callback);\n      }\n      delete(this.__inputListeners);\n    },\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      NATIVE EVENT OBSERVERS\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Low level handler for \"keyup\" and \"keydown\" events\n     *\n     * @internal\n     * @signature function(domEvent)\n     * @param domEvent {Event} DOM event object\n     */\n    __onKeyUpDown : qx.event.GlobalError.observeMethod(qx.core.Environment.select(\"engine.name\",\n    {\n      \"mshtml\" : function(domEvent)\n      {\n        domEvent = window.event || domEvent;\n\n        var keyCode = domEvent.keyCode;\n        var charCode = 0;\n        var type = domEvent.type;\n\n        // Ignore the down in such sequences dp dp dp\n        if (!(this.__lastUpDownType[keyCode] == \"keydown\" && type == \"keydown\")) {\n          this._idealKeyHandler(keyCode, charCode, type, domEvent);\n        }\n\n        // On non print-able character be sure to add a keypress event\n        if (type == \"keydown\")\n        {\n          // non-printable, backspace or tab\n          if (qx.event.util.Keyboard.isNonPrintableKeyCode(keyCode) || this._emulateKeyPress[keyCode]) {\n            this._idealKeyHandler(keyCode, charCode, \"keypress\", domEvent);\n          }\n        }\n\n        // Store last type\n        this.__lastUpDownType[keyCode] = type;\n      },\n\n      \"gecko\" : function(domEvent)\n      {\n        var charCode = 0;\n        var keyCode = domEvent.keyCode;\n        var type = domEvent.type;\n        var kbUtil = qx.event.util.Keyboard;\n\n        // FF repeats under windows keydown events like IE\n        if (qx.core.Environment.get(\"os.name\") == \"win\")\n        {\n          var keyIdentifier = keyCode ? kbUtil.keyCodeToIdentifier(keyCode) : kbUtil.charCodeToIdentifier(charCode);\n\n          if (!(this.__lastUpDownType[keyIdentifier] == \"keydown\" && type == \"keydown\")) {\n            this._idealKeyHandler(keyCode, charCode, type, domEvent);\n          }\n\n          // Store last type\n          this.__lastUpDownType[keyIdentifier] = type;\n        }\n\n        // all other OSes\n        else\n        {\n          this._idealKeyHandler(keyCode, charCode, type, domEvent);\n        }\n\n        this.__firefoxInputFix(domEvent.target, type, keyCode);\n      },\n\n      \"webkit\" : function(domEvent)\n      {\n        var keyCode = 0;\n        var charCode = 0;\n        var type = domEvent.type;\n\n        keyCode = domEvent.keyCode;\n\n        this._idealKeyHandler(keyCode, charCode, type, domEvent);\n\n        // On non print-able character be sure to add a keypress event\n        if (type == \"keydown\")\n        {\n          // non-printable, backspace or tab\n          if (qx.event.util.Keyboard.isNonPrintableKeyCode(keyCode) || this._emulateKeyPress[keyCode]) {\n            this._idealKeyHandler(keyCode, charCode, \"keypress\", domEvent);\n          }\n        }\n\n        // Store last type\n        this.__lastUpDownType[keyCode] = type;\n      },\n\n      \"opera\" : function(domEvent)\n      {\n        this.__lastKeyCode = domEvent.keyCode;\n        this._idealKeyHandler(domEvent.keyCode, 0, domEvent.type, domEvent);\n      }\n    })),\n\n\n    /**\n     * some keys like \"up\", \"down\", \"pageup\", \"pagedown\" do not bubble a\n     * \"keypress\" event in Firefox. To work around this bug we attach keypress\n     * listeners directly to the input events.\n     *\n     * https://bugzilla.mozilla.org/show_bug.cgi?id=467513\n     *\n     * @signature function(target, type, keyCode)\n     * @param target {Element} The event target\n     * @param type {String} The event type\n     * @param keyCode {Integer} the key code\n     */\n    __firefoxInputFix : qx.core.Environment.select(\"engine.name\",\n    {\n      \"gecko\" : function(target, type, keyCode)\n      {\n        if (\n          type === \"keydown\" &&\n          (keyCode == 33 || keyCode == 34 || keyCode == 38 || keyCode == 40) &&\n          target.type == \"text\" &&\n          target.tagName.toLowerCase() === \"input\" &&\n          target.getAttribute(\"autoComplete\") !== \"off\"\n        )\n        {\n          if (!this.__inputListeners) {\n            this.__inputListeners = {};\n          }\n          var hash = qx.core.ObjectRegistry.toHashCode(target);\n          if (this.__inputListeners[hash]) {\n            return;\n          }\n          var self = this;\n          this.__inputListeners[hash] = {\n            target: target,\n            callback : function(domEvent)\n            {\n              qx.bom.Event.stopPropagation(domEvent);\n              self.__onKeyPress(domEvent);\n            }\n          };\n          var listener = qx.event.GlobalError.observeMethod(this.__inputListeners[hash].callback);\n          qx.bom.Event.addNativeListener(target, \"keypress\", listener);\n        }\n      },\n\n      \"default\" : null\n    }),\n\n\n    /**\n     * Low level key press handler\n     *\n     * @signature function(domEvent)\n     * @param domEvent {Event} DOM event object\n     */\n    __onKeyPress : qx.event.GlobalError.observeMethod(qx.core.Environment.select(\"engine.name\",\n    {\n      \"mshtml\" : function(domEvent)\n      {\n        domEvent = window.event || domEvent;\n\n        if (this._charCode2KeyCode[domEvent.keyCode]) {\n          this._idealKeyHandler(this._charCode2KeyCode[domEvent.keyCode], 0, domEvent.type, domEvent);\n        } else {\n          this._idealKeyHandler(0, domEvent.keyCode, domEvent.type, domEvent);\n        }\n      },\n\n      \"gecko\" : function(domEvent)\n      {\n        var charCode = domEvent.charCode;\n        var type = domEvent.type;\n\n        this._idealKeyHandler(domEvent.keyCode, charCode, type, domEvent);\n      },\n\n      \"webkit\" : function(domEvent)\n      {\n        if (this._charCode2KeyCode[domEvent.keyCode]) {\n          this._idealKeyHandler(this._charCode2KeyCode[domEvent.keyCode], 0, domEvent.type, domEvent);\n        } else {\n          this._idealKeyHandler(0, domEvent.keyCode, domEvent.type, domEvent);\n        }\n      },\n\n      \"opera\" : function(domEvent)\n      {\n        var keyCode = domEvent.keyCode;\n        var type = domEvent.type;\n\n        // Some keys are identified differently for key up/down and keypress\n        // (e.g. \"v\" gets identified as \"F7\").\n        // So we store the last key up/down keycode and compare it to the\n        // current keycode.\n        // See http://bugzilla.qooxdoo.org/show_bug.cgi?id=603\n        if(keyCode != this.__lastKeyCode)\n        {\n          this._idealKeyHandler(0, this.__lastKeyCode, type, domEvent);\n        }\n        else\n        {\n          if (qx.event.util.Keyboard.keyCodeToIdentifierMap[domEvent.keyCode]) {\n            this._idealKeyHandler(domEvent.keyCode, 0, domEvent.type, domEvent);\n          } else {\n            this._idealKeyHandler(0, domEvent.keyCode, domEvent.type, domEvent);\n          }\n        }\n\n      }\n    })),\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      IDEAL KEY HANDLER\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Key handler for an idealized browser.\n     * Runs after the browser specific key handlers have normalized the key events.\n     *\n     * @param keyCode {String} keyboard code\n     * @param charCode {String} character code\n     * @param eventType {String} type of the event (keydown, keypress, keyup)\n     * @param domEvent {Element} DomEvent\n     */\n    _idealKeyHandler : function(keyCode, charCode, eventType, domEvent)\n    {\n      var keyIdentifier;\n\n      // Use: keyCode\n      if (keyCode || (!keyCode && !charCode))\n      {\n        keyIdentifier = qx.event.util.Keyboard.keyCodeToIdentifier(keyCode);\n\n        this._fireSequenceEvent(domEvent, eventType, keyIdentifier);\n      }\n\n      // Use: charCode\n      else\n      {\n        keyIdentifier = qx.event.util.Keyboard.charCodeToIdentifier(charCode);\n\n        this._fireSequenceEvent(domEvent, \"keypress\", keyIdentifier);\n        this._fireInputEvent(domEvent, charCode);\n      }\n    },\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      KEY MAPS\n    ---------------------------------------------------------------------------\n    */\n\n\n    /**\n     * @type {Map} maps the charcodes of special keys for key press emulation\n     *\n     * @lint ignoreReferenceField(_emulateKeyPress)\n     */\n    _emulateKeyPress : qx.core.Environment.select(\"engine.name\",\n    {\n      \"mshtml\" : {\n        8: true,\n        9: true\n      },\n\n      \"webkit\" : {\n        8: true,\n        9: true,\n        27: true\n      },\n\n      \"default\" : {}\n    }),\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      HELPER METHODS\n    ---------------------------------------------------------------------------\n    */\n\n\n    /**\n     * converts a key identifier back to a keycode\n     *\n     * @param keyIdentifier {String} The key identifier to convert\n     * @return {Integer} keyboard code\n     */\n    _identifierToKeyCode : function(keyIdentifier) {\n      return qx.event.util.Keyboard.identifierToKeyCodeMap[keyIdentifier] || keyIdentifier.charCodeAt(0);\n    }\n  },\n\n\n\n\n\n\n  /*\n  *****************************************************************************\n     DESTRUCTOR\n  *****************************************************************************\n  */\n\n  destruct : function()\n  {\n    this._stopKeyObserver();\n    this.__lastKeyCode = this.__manager = this.__window = this.__root = this.__lastUpDownType = null;\n  },\n\n\n\n\n\n  /*\n  *****************************************************************************\n     DEFER\n  *****************************************************************************\n  */\n\n  defer : function(statics, members)\n  {\n    // register at the event handler\n    qx.event.Registration.addHandler(statics);\n\n    if ((qx.core.Environment.get(\"engine.name\") == \"mshtml\") ||\n      qx.core.Environment.get(\"engine.name\") == \"webkit\")\n    {\n      members._charCode2KeyCode =\n      {\n        13 : 13,\n        27 : 27\n      };\n    }\n  }\n});\n"
  ]
}