{
  "version": 3,
  "sources": [
    "Element.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "core",
    "Object",
    "implement",
    "IDisposable",
    "construct",
    "tagName",
    "styles",
    "attributes",
    "__nodeName",
    "__styleValues",
    "__attribValues",
    "statics",
    "DEBUG",
    "_modified",
    "_visibility",
    "_scroll",
    "_actions",
    "__selection",
    "__focusHandler",
    "__mouseCapture",
    "_scheduleFlush",
    "job",
    "html",
    "Element",
    "__deferredCall",
    "schedule",
    "flush",
    "obj",
    "log",
    "Logger",
    "debug",
    "focusHandler",
    "__getFocusHandler",
    "focusedDomElement",
    "getFocus",
    "__willBecomeInvisible",
    "blur",
    "activeDomElement",
    "getActive",
    "bom",
    "deactivate",
    "captureDomElement",
    "__getCaptureElement",
    "releaseCapture",
    "later",
    "modified",
    "hc",
    "__willBeSeeable",
    "classname",
    "__element",
    "dom",
    "Hierarchy",
    "isRendered",
    "push",
    "__flush",
    "i",
    "l",
    "length",
    "visibility",
    "element",
    "__visible",
    "$$disposed",
    "style",
    "display",
    "Environment",
    "get",
    "document",
    "documentMode",
    "scroll",
    "elem",
    "offsetWidth",
    "done",
    "__lazyScrollX",
    "scrollLeft",
    "__lazyScrollY",
    "scrollTop",
    "intoViewX",
    "__lazyScrollIntoViewX",
    "child",
    "getDomElement",
    "Scroll",
    "align",
    "intoViewY",
    "__lazyScrollIntoViewY",
    "activityEndActions",
    "action",
    "type",
    "args",
    "unshift",
    "apply",
    "selection",
    "Selection",
    "set",
    "start",
    "end",
    "event",
    "handler",
    "Appear",
    "refresh",
    "eventManager",
    "Registration",
    "getManager",
    "window",
    "getHandler",
    "Focus",
    "getDispatcher",
    "dispatch",
    "MouseCapture",
    "getCaptureElement",
    "domElement",
    "fromDomElement",
    "Assert",
    "assertTrue",
    "$$element",
    "$$elementObject",
    "toHashCode",
    "members",
    "__widget",
    "__root",
    "__included",
    "__styleJobs",
    "__attribJobs",
    "__propertyJobs",
    "__propertyValues",
    "__eventValues",
    "__children",
    "__modifiedChildren",
    "__parent",
    "_scheduleChildrenUpdate",
    "$$hash",
    "_createDomElement",
    "create",
    "connectWidget",
    "widget",
    "$$widget",
    "$$widgetObject",
    "disconnectWidget",
    "__connectDomElement",
    "getAttribute",
    "children",
    "_copyData",
    "_insertChildren",
    "_syncData",
    "_syncChildren",
    "createDocumentFragment",
    "appendChild",
    "dataChildren",
    "dataLength",
    "dataChild",
    "dataEl",
    "domParent",
    "domChildren",
    "childNodes",
    "domPos",
    "domEl",
    "domOperations",
    "removeChild",
    "insertBefore",
    "fromMarkup",
    "data",
    "Attribute",
    "key",
    "Style",
    "setStyles",
    "setCss",
    "compile",
    "_applyProperty",
    "importListeners",
    "jobs",
    "value",
    "undefined",
    "reset",
    "pa",
    "__addChildHelper",
    "Error",
    "remove",
    "__removeChildHelper",
    "__moveChildHelper",
    "getChildren",
    "getChild",
    "index",
    "hasChildren",
    "indexOf",
    "hasChild",
    "add",
    "varargs",
    "arguments",
    "addAt",
    "lang",
    "Array",
    "insertAt",
    "childs",
    "removeAt",
    "removeAll",
    "getParent",
    "insertInto",
    "parent",
    "rel",
    "insertAfter",
    "moveTo",
    "oldIndex",
    "moveBefore",
    "moveAfter",
    "free",
    "getNodeName",
    "setNodeName",
    "name",
    "setRoot",
    "root",
    "useMarkup",
    "helper",
    "createElement",
    "getHelperElement",
    "innerHTML",
    "useElement",
    "firstChild",
    "isFocusable",
    "tabIndex",
    "focusable",
    "FOCUSABLE_ELEMENTS",
    "setSelectable",
    "setAttribute",
    "userSelect",
    "setStyle",
    "isNativelyFocusable",
    "include",
    "exclude",
    "isIncluded",
    "fadeIn",
    "duration",
    "col",
    "qxWeb",
    "isPlaying",
    "stop",
    "once",
    "show",
    "getAnimationHandles",
    "fadeOut",
    "hide",
    "isVisible",
    "scrollChildIntoViewX",
    "direct",
    "thisEl",
    "childEl",
    "scrollChildIntoViewY",
    "scrollToX",
    "x",
    "lazy",
    "getScrollX",
    "scrollToY",
    "y",
    "getScrollY",
    "disableScrolling",
    "enableScrolling",
    "addListener",
    "__onScroll",
    "removeListener",
    "__inScroll",
    "e",
    "getTextSelection",
    "el",
    "getTextSelectionLength",
    "getLength",
    "getTextSelectionStart",
    "getStart",
    "getTextSelectionEnd",
    "getEnd",
    "setTextSelection",
    "clearTextSelection",
    "clear",
    "__performAction",
    "actions",
    "focus",
    "activate",
    "capture",
    "containerCapture",
    "map",
    "removeStyle",
    "getStyle",
    "getAllStyles",
    "setAttributes",
    "removeAttribute",
    "addClass",
    "trim",
    "removeClass",
    "currentClass",
    "replace",
    "_setProperty",
    "_removeProperty",
    "_getProperty",
    "db",
    "listener",
    "self",
    "msg",
    "assertString",
    "assertFunction",
    "assertObject",
    "assertBoolean",
    "unique",
    "Manager",
    "getNextUniqueId",
    "id",
    "$$wrapped_callback",
    "callback",
    "values",
    "entry",
    "removeListenerById",
    "hasListener",
    "getListeners",
    "serializeListeners",
    "listeners",
    "listenerData",
    "defer",
    "util",
    "DeferredCall",
    "destruct",
    "removeAllListeners",
    "ObjectRegistry",
    "inShutDown",
    "_disposeArray"
  ],
  "mappings": "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",
  "file": "Element.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2008 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Sebastian Werner (wpbasti)\n\n************************************************************************ */\n\n/**\n * High-performance, high-level DOM element creation and management.\n *\n * Includes support for HTML and style attributes. Elements also have\n * got a powerful children and visibility management.\n *\n * Processes DOM insertion and modification with advanced logic\n * to reduce the real transactions.\n *\n * From the view of the parent you can use the following children management\n * methods:\n * {@link #getChildren}, {@link #indexOf}, {@link #hasChild}, {@link #add},\n * {@link #addAt}, {@link #remove}, {@link #removeAt}, {@link #removeAll}\n *\n * Each child itself also has got some powerful methods to control its\n * position:\n * {@link #getParent}, {@link #free},\n * {@link #insertInto}, {@link #insertBefore}, {@link #insertAfter},\n * {@link #moveTo}, {@link #moveBefore}, {@link #moveAfter},\n *\n * NOTE: Instances of this class must be disposed of after use\n *\n * @require(qx.module.Animation)\n */\nqx.Class.define(\"qx.html.Element\",\n{\n  extend : qx.core.Object,\n  implement : [ qx.core.IDisposable ],\n\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * Creates a new Element\n   *\n   * @param tagName {String?\"div\"} Tag name of the element to create\n   * @param styles {Map?null} optional map of CSS styles, where the key is the name\n   *    of the style and the value is the value to use.\n   * @param attributes {Map?null} optional map of element attributes, where the\n   *    key is the name of the attribute and the value is the value to use.\n   */\n  construct : function(tagName, styles, attributes)\n  {\n    this.base(arguments);\n\n    // {String} Set tag name\n    this.__nodeName = tagName || \"div\";\n\n    this.__styleValues = styles || null;\n    this.__attribValues = attributes || null;\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     STATICS\n  *****************************************************************************\n  */\n\n  statics :\n  {\n    /*\n    ---------------------------------------------------------------------------\n      STATIC DATA\n    ---------------------------------------------------------------------------\n    */\n\n    /** @type {Boolean} If debugging should be enabled */\n    DEBUG : false,\n\n\n    /** @type {Map} Contains the modified {@link qx.html.Element}s. The key is the hash code. */\n    _modified : {},\n\n\n    /** @type {Map} Contains the {@link qx.html.Element}s which should get hidden or visible at the next flush. The key is the hash code. */\n    _visibility : {},\n\n\n    /** @type {Map} Contains the {@link qx.html.Element}s which should scrolled at the next flush */\n    _scroll : {},\n\n\n    /** @type {Array} List of post actions for elements. The key is the action name. The value the {@link qx.html.Element}. */\n    _actions : [],\n\n\n    /**  @type {Map} List of all selections. */\n    __selection : {},\n\n\n    __focusHandler : null,\n\n\n    __mouseCapture : null,\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      PUBLIC ELEMENT FLUSH\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Schedule a deferred element queue flush. If the widget subsystem is used\n     * this method gets overwritten by {@link qx.ui.core.queue.Manager}.\n     *\n     * @param job {String} The job descriptor. Should always be <code>\"element\"</code>.\n     */\n    _scheduleFlush : function(job) {\n      qx.html.Element.__deferredCall.schedule();\n    },\n\n\n    /**\n     * Flush the global modified list\n     */\n    flush : function()\n    {\n      var obj;\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (this.DEBUG) {\n          qx.log.Logger.debug(this, \"Flushing elements...\");\n        }\n      }\n\n\n      // blur elements, which will be removed\n      var focusHandler = this.__getFocusHandler();\n      var focusedDomElement = focusHandler.getFocus();\n      if (focusedDomElement && this.__willBecomeInvisible(focusedDomElement)) {\n        focusHandler.blur(focusedDomElement);\n      }\n\n      // decativate elements, which will be removed\n      var activeDomElement = focusHandler.getActive();\n      if (activeDomElement && this.__willBecomeInvisible(activeDomElement)) {\n        qx.bom.Element.deactivate(activeDomElement);\n      }\n\n      // release capture for elements, which will be removed\n      var captureDomElement = this.__getCaptureElement();\n      if (captureDomElement && this.__willBecomeInvisible(captureDomElement)) {\n        qx.bom.Element.releaseCapture(captureDomElement);\n      }\n\n\n      var later = [];\n      var modified = this._modified;\n\n      for (var hc in modified)\n      {\n        obj = modified[hc];\n        // Ignore all hidden elements except iframes\n        // but keep them until they get visible (again)\n        if (obj.__willBeSeeable() || obj.classname == \"qx.html.Iframe\")\n        {\n          // Separately queue rendered elements\n          if (obj.__element && qx.dom.Hierarchy.isRendered(obj.__element)) {\n            later.push(obj);\n          }\n\n          // Flush invisible elements first\n          else\n          {\n            if (qx.core.Environment.get(\"qx.debug\"))\n            {\n              if (this.DEBUG) {\n                obj.debug(\"Flush invisible element\");\n              }\n            }\n\n            obj.__flush();\n          }\n\n          // Cleanup modification list\n          delete modified[hc];\n        }\n      }\n\n      for (var i=0, l=later.length; i<l; i++)\n      {\n        obj = later[i];\n\n        if (qx.core.Environment.get(\"qx.debug\"))\n        {\n          if (this.DEBUG) {\n            obj.debug(\"Flush rendered element\");\n          }\n        }\n\n        obj.__flush();\n      }\n\n\n\n      // Process visibility list\n      var visibility = this._visibility;\n\n      for (var hc in visibility)\n      {\n        obj = visibility[hc];\n\n        var element = obj.__element;\n        if (!element)\n        {\n          delete visibility[hc];\n          continue;\n        }\n\n        if (qx.core.Environment.get(\"qx.debug\"))\n        {\n          if (this.DEBUG) {\n            qx.log.Logger.debug(this, \"Switching visibility to: \" + obj.__visible);\n          }\n        }\n\n        // hiding or showing an object and deleting it right after that may\n        // cause an disposed object in the visibility queue [BUG #3607]\n        if (!obj.$$disposed) {\n          element.style.display = obj.__visible ? \"\" : \"none\";\n          // also hide the element (fixed some rendering problem in IE<8 & IE8 quirks)\n          if ((qx.core.Environment.get(\"engine.name\") == \"mshtml\"))\n          {\n            if (!(document.documentMode >= 8)) {\n              element.style.visibility = obj.__visible ? \"visible\" : \"hidden\";\n            }\n          }\n        }\n\n        delete visibility[hc];\n      }\n\n      // Process scroll list\n      var scroll = this._scroll;\n      for (var hc in scroll)\n      {\n        obj = scroll[hc];\n        var elem = obj.__element;\n\n        if (elem && elem.offsetWidth)\n        {\n          var done = true;\n\n          // ScrollToX\n          if (obj.__lazyScrollX != null)\n          {\n            obj.__element.scrollLeft = obj.__lazyScrollX;\n            delete obj.__lazyScrollX;\n          }\n\n          // ScrollToY\n          if (obj.__lazyScrollY != null)\n          {\n            obj.__element.scrollTop = obj.__lazyScrollY;\n            delete obj.__lazyScrollY;\n          }\n\n          // ScrollIntoViewX\n          var intoViewX = obj.__lazyScrollIntoViewX;\n          if (intoViewX != null)\n          {\n            var child = intoViewX.element.getDomElement();\n\n            if (child && child.offsetWidth)\n            {\n              qx.bom.element.Scroll.intoViewX(child, elem, intoViewX.align);\n              delete obj.__lazyScrollIntoViewX;\n            }\n            else\n            {\n              done = false;\n            }\n          }\n\n          // ScrollIntoViewY\n          var intoViewY = obj.__lazyScrollIntoViewY;\n          if (intoViewY != null)\n          {\n            var child = intoViewY.element.getDomElement();\n\n            if (child && child.offsetWidth)\n            {\n              qx.bom.element.Scroll.intoViewY(child, elem, intoViewY.align);\n              delete obj.__lazyScrollIntoViewY;\n            }\n            else\n            {\n              done = false;\n            }\n          }\n\n          // Clear flag if all things are done\n          // Otherwise wait for the next flush\n          if (done) {\n            delete scroll[hc];\n          }\n        }\n      }\n\n\n      var activityEndActions = {\n        \"releaseCapture\": 1,\n        \"blur\": 1,\n        \"deactivate\": 1\n      };\n\n      // Process action list\n      for (var i=0; i<this._actions.length; i++)\n      {\n        var action = this._actions[i];\n        var element = action.element.__element;\n        if (!element || !activityEndActions[action.type] && !action.element.__willBeSeeable()) {\n          continue;\n        }\n        var args = action.args;\n        args.unshift(element);\n        qx.bom.Element[action.type].apply(qx.bom.Element, args);\n      }\n      this._actions = [];\n\n      // Process selection\n      for (var hc in this.__selection)\n      {\n        var selection = this.__selection[hc];\n        var elem = selection.element.__element;\n        if (elem)\n        {\n          qx.bom.Selection.set(elem, selection.start, selection.end);\n          delete this.__selection[hc];\n        }\n      }\n\n      // Fire appear/disappear events\n      qx.event.handler.Appear.refresh();\n    },\n\n\n    /**\n     * Get the focus handler\n     *\n     * @return {qx.event.handler.Focus} The focus handler\n     */\n    __getFocusHandler : function()\n    {\n      if (!this.__focusHandler)\n      {\n        var eventManager = qx.event.Registration.getManager(window);\n        this.__focusHandler = eventManager.getHandler(qx.event.handler.Focus);\n      }\n      return this.__focusHandler;\n    },\n\n\n    /**\n     * Get the mouse capture element\n     *\n     * @return {Element} The mouse capture DOM element\n     */\n    __getCaptureElement : function()\n    {\n      if (!this.__mouseCapture)\n      {\n        var eventManager = qx.event.Registration.getManager(window);\n        this.__mouseCapture = eventManager.getDispatcher(qx.event.dispatch.MouseCapture);\n      }\n      return this.__mouseCapture.getCaptureElement();\n    },\n\n\n    /**\n     * Whether the given DOM element will become invisible after the flush\n     *\n     * @param domElement {Element} The DOM element to check\n     * @return {Boolean} Whether the element will become invisible\n     */\n    __willBecomeInvisible : function(domElement)\n    {\n      var element = this.fromDomElement(domElement);\n      return element && !element.__willBeSeeable();\n    },\n    \n    \n    /**\n     * Finds the Widget for a given DOM element\n     * \n     * @param domElement {DOM} the DOM element\n     * @return {Widget} the Widget that created the DOM element\n     */\n    fromDomElement: function(domElement) {\n    \tif (qx.core.Environment.get(\"qx.debug\")) {\n    \t\tqx.core.Assert.assertTrue((!domElement.$$element && !domElement.$$elementObject) || \n    \t\t\t\tdomElement.$$element === domElement.$$elementObject.toHashCode());\n    \t}\n      return domElement.$$elementObject;\n    }\n\n  },\n\n\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    /*\n    ---------------------------------------------------------------------------\n      PROTECTED HELPERS/DATA\n    ---------------------------------------------------------------------------\n    */\n\n    __nodeName : null,\n\n    /** @type {Element} DOM element of this object */\n    __element : null,\n    \n    /** @type {Widget} the Widget this element is attached to */\n    __widget : null,\n\n    /** @type {Boolean} Marker for always visible root nodes (often the body node) */\n    __root : false,\n\n    /** @type {Boolean} Whether the element should be included in the render result */\n    __included : true,\n\n    /** @type {Boolean} Whether the element should be visible in the render result */\n    __visible : true,\n\n    __lazyScrollIntoViewX : null,\n    __lazyScrollIntoViewY : null,\n\n    __lazyScrollX : null,\n    __lazyScrollY : null,\n\n    __styleJobs : null,\n    __attribJobs : null,\n    __propertyJobs : null,\n\n    __styleValues : null,\n    __attribValues : null,\n    __propertyValues : null,\n    __eventValues : null,\n\n    __children : null,\n    __modifiedChildren : null,\n\n    __parent : null,\n\n    /**\n     * Add the element to the global modification list.\n     *\n     */\n    _scheduleChildrenUpdate : function()\n    {\n      if (this.__modifiedChildren) {\n        return;\n      }\n\n      this.__modifiedChildren = true;\n\n      qx.html.Element._modified[this.$$hash] = this;\n      qx.html.Element._scheduleFlush(\"element\");\n    },\n\n\n    /**\n     * Internal helper to generate the DOM element\n     *\n     * @return {Element} DOM element\n     */\n    _createDomElement : function() {\n      return qx.dom.Element.create(this.__nodeName);\n    },\n    \n    \n    /**\n     * Connects a widget to this element, and to the DOM element in this Element.  They\n     * remain associated until disposed or disconnectWidget is called\n     * \n     * @param widget {qx.ui.core.Widget} the widget\n     */\n    connectWidget: function(widget) {\n    \tif (qx.core.Environment.get(\"qx.debug\")) {\n      \tqx.core.Assert.assertTrue(!this.__widget || this.__widget === widget);\n    \t}\n    \t\n    \tthis.__widget = widget;\n    \tif (this.__element) {\n      \tif (qx.core.Environment.get(\"qx.debug\")) {\n      \t\tqx.core.Assert.assertTrue((!this.__element.$$widget && !this.__element.$$widgetObject) ||\n      \t\t\t\t(this.__element.$$widgetObject === widget && this.__element.$$widget === widget.toHashCode()));\n      \t}\n      \t\n      \tthis.__element.$$widget = widget.toHashCode();\n      \tthis.__element.$$widgetObject = widget;\n    \t}\n    },\n    \n    \n    /**\n     * Disconnects a widget from this element and the DOM element.  The DOM element remains\n     * untouched, except that it can no longer be used to find the Widget.\n     * \n     * @param widget {qx.ui.core.Widget} the Widget\n     */\n    disconnectWidget: function(widget) {\n    \tif (qx.core.Environment.get(\"qx.debug\")) {\n      \tqx.core.Assert.assertTrue(this.__widget === widget);\n    \t}\n    \t\n    \tdelete this.__widget;\n    \tif (this.__element) {\n      \tif (qx.core.Environment.get(\"qx.debug\")) {\n      \t\tqx.core.Assert.assertTrue((!this.__element.$$widget && !this.__element.$$widgetObject) ||\n      \t\t\t\t(this.__element.$$widgetObject === widget && this.__element.$$widget === widget.toHashCode()));\n      \t}\n      \t\n      \tthis.__element.$$widget = \"\";\n      \tdelete this.__element.$$widgetObject;\n    \t}\n    },\n    \n    \n    /**\n     * Connects a DOM element to this Element; if this Element is already connected to a Widget\n     * then the Widget is also connected.\n     * \n     * @param domElement {DOM} the DOM element to associate\n     */\n    __connectDomElement: function(domElement) {\n    \tif (qx.core.Environment.get(\"qx.debug\")) {\n    \t\tqx.core.Assert.assertTrue(!this.__element || this.__element === domElement);\n    \t\tqx.core.Assert.assertTrue((domElement.$$elementObject === this && domElement.$$element === this.toHashCode()) ||\n    \t\t\t\t(!domElement.$$elementObject && !domElement.$$element));\n    \t};\n    \t\n    \tthis.__element = domElement;\n    \tdomElement.$$elementObject = this;\n    \tdomElement.$$element = this.toHashCode();\n    \tif (this.__widget) {\n      \tdomElement.$$widget = this.__widget.toHashCode();\n      \tdomElement.$$widgetObject = this.__widget;\n    \t}\n    },\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      FLUSH OBJECT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Syncs data of an HtmlElement object to the DOM.\n     *\n     */\n    __flush : function()\n    {\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (this.DEBUG) {\n          this.debug(\"Flush: \" + this.getAttribute(\"id\"));\n        }\n      }\n\n      var length;\n      var children = this.__children;\n      if (children)\n      {\n        length = children.length;\n        var child;\n        for (var i=0; i<length; i++)\n        {\n          child = children[i];\n\n          if (child.__visible && child.__included && !child.__element) {\n            child.__flush();\n          }\n        }\n      }\n\n      if (!this.__element)\n      {\n        this.__connectDomElement(this._createDomElement());\n\n        this._copyData(false);\n\n        if (children && length > 0) {\n          this._insertChildren();\n        }\n      }\n      else\n      {\n        this._syncData();\n\n        if (this.__modifiedChildren) {\n          this._syncChildren();\n        }\n      }\n\n      delete this.__modifiedChildren;\n    },\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      SUPPORT FOR CHILDREN FLUSH\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Append all child nodes to the DOM\n     * element. This function is used when the element is initially\n     * created. After this initial apply {@link #_syncChildren} is used\n     * instead.\n     *\n     */\n    _insertChildren : function()\n    {\n      var children = this.__children;\n      var length = children.length;\n      var child;\n\n      if (length > 2)\n      {\n        var domElement = document.createDocumentFragment();\n        for (var i=0; i<length; i++)\n        {\n          child = children[i];\n          if (child.__element && child.__included) {\n            domElement.appendChild(child.__element);\n          }\n        }\n\n        this.__element.appendChild(domElement);\n      }\n      else\n      {\n        var domElement = this.__element;\n        for (var i=0; i<length; i++)\n        {\n          child = children[i];\n          if (child.__element && child.__included) {\n            domElement.appendChild(child.__element);\n          }\n        }\n      }\n    },\n\n\n    /**\n     * Synchronize internal children hierarchy to the DOM. This is used\n     * for further runtime updates after the element has been created\n     * initially.\n     *\n     */\n    _syncChildren : function()\n    {\n      var dataChildren = this.__children;\n      var dataLength = dataChildren.length;\n      var dataChild;\n      var dataEl;\n\n      var domParent = this.__element;\n      var domChildren = domParent.childNodes;\n      var domPos = 0;\n      var domEl;\n\n      if (qx.core.Environment.get(\"qx.debug\")) {\n        var domOperations = 0;\n      }\n\n      // Remove children from DOM which are excluded or remove first\n      for (var i=domChildren.length-1; i>=0; i--)\n      {\n        domEl = domChildren[i];\n        dataEl = qx.html.Element.fromDomElement(domEl);\n\n        if (!dataEl || !dataEl.__included || dataEl.__parent !== this)\n        {\n          domParent.removeChild(domEl);\n\n          if (qx.core.Environment.get(\"qx.debug\")) {\n            domOperations++;\n          }\n        }\n      }\n\n      // Start from beginning and bring DOM in sync\n      // with the data structure\n      for (var i=0; i<dataLength; i++)\n      {\n        dataChild = dataChildren[i];\n\n        // Only process visible childs\n        if (dataChild.__included)\n        {\n          dataEl = dataChild.__element;\n          domEl = domChildren[domPos];\n\n          if (!dataEl) {\n            continue;\n          }\n\n          // Only do something when out of sync\n          // If the data element is not there it may mean that it is still\n          // marked as visible=false\n          if (dataEl != domEl)\n          {\n            if (domEl) {\n              domParent.insertBefore(dataEl, domEl);\n            } else {\n              domParent.appendChild(dataEl);\n            }\n\n            if (qx.core.Environment.get(\"qx.debug\")) {\n              domOperations++;\n            }\n          }\n\n          // Increase counter\n          domPos++;\n        }\n      }\n\n      // User feedback\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        if (qx.html.Element.DEBUG) {\n          this.debug(\"Synced DOM with \" + domOperations + \" operations\");\n        }\n      }\n    },\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      SUPPORT FOR ATTRIBUTE/STYLE/EVENT FLUSH\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Copies data between the internal representation and the DOM. This\n     * simply copies all the data and only works well directly after\n     * element creation. After this the data must be synced using {@link #_syncData}\n     *\n     * @param fromMarkup {Boolean} Whether the copy should respect styles\n     *   given from markup\n     */\n    _copyData : function(fromMarkup)\n    {\n      var elem = this.__element;\n\n      // Copy attributes\n      var data = this.__attribValues;\n      if (data)\n      {\n        var Attribute = qx.bom.element.Attribute;\n\n        for (var key in data) {\n          Attribute.set(elem, key, data[key]);\n        }\n      }\n\n      // Copy styles\n      var data = this.__styleValues;\n      if (data)\n      {\n        var Style = qx.bom.element.Style;\n        if (fromMarkup) {\n          Style.setStyles(elem, data);\n        }\n        else\n        {\n          // Set styles at once which is a lot faster in most browsers\n          // compared to separate modifications of many single style properties.\n          Style.setCss(elem, Style.compile(data));\n        }\n      }\n\n      // Copy properties\n      var data = this.__propertyValues;\n      if (data)\n      {\n        for (var key in data) {\n          this._applyProperty(key, data[key]);\n        }\n      }\n\n      // Attach events\n      var data = this.__eventValues;\n      if (data)\n      {\n        // Import listeners\n        qx.event.Registration.getManager(elem).importListeners(elem, data);\n\n        // Cleanup event map\n        // Events are directly attached through event manager\n        // after initial creation. This differs from the\n        // handling of styles and attributes where queuing happens\n        // through the complete runtime of the application.\n        delete this.__eventValues;\n      }\n    },\n\n\n    /**\n     * Synchronizes data between the internal representation and the DOM. This\n     * is the counterpart of {@link #_copyData} and is used for further updates\n     * after the element has been created.\n     *\n     */\n    _syncData : function()\n    {\n      var elem = this.__element;\n\n      var Attribute = qx.bom.element.Attribute;\n      var Style = qx.bom.element.Style;\n\n      // Sync attributes\n      var jobs = this.__attribJobs;\n      if (jobs)\n      {\n        var data = this.__attribValues;\n        if (data)\n        {\n          var value;\n          for (var key in jobs)\n          {\n            value = data[key];\n\n            if (value !== undefined) {\n              Attribute.set(elem, key, value);\n            } else {\n              Attribute.reset(elem, key);\n            }\n          }\n        }\n\n        this.__attribJobs = null;\n      }\n\n      // Sync styles\n      var jobs = this.__styleJobs;\n      if (jobs)\n      {\n        var data = this.__styleValues;\n        if (data)\n        {\n          var styles = {};\n          for (var key in jobs) {\n            styles[key] = data[key];\n          }\n\n          Style.setStyles(elem, styles);\n        }\n\n        this.__styleJobs = null;\n      }\n\n      // Sync misc\n      var jobs = this.__propertyJobs;\n      if (jobs)\n      {\n        var data = this.__propertyValues;\n        if (data)\n        {\n          var value;\n          for (var key in jobs) {\n            this._applyProperty(key, data[key]);\n          }\n        }\n\n        this.__propertyJobs = null;\n      }\n\n      // Note: Events are directly kept in sync\n    },\n\n\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      PRIVATE HELPERS/DATA\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Walk up the internal children hierarchy and\n     * look if one of the children is marked as root.\n     *\n     * This method is quite performance hungry as it\n     * really walks up recursively.\n     * @return {Boolean} <code>true</code> if the element will be seeable\n     */\n    __willBeSeeable : function()\n    {\n      var pa = this;\n\n      // Any chance to cache this information in the parents?\n      while(pa)\n      {\n        if (pa.__root) {\n          return true;\n        }\n\n        if (!pa.__included || !pa.__visible) {\n          return false;\n        }\n\n        pa = pa.__parent;\n      }\n\n      return false;\n    },\n\n\n    /**\n     * Internal helper for all children addition needs\n     *\n     * @param child {var} the element to add\n     * @throws {Error} if the given element is already a child\n     *     of this element\n     */\n    __addChildHelper : function(child)\n    {\n      if (child.__parent === this) {\n        throw new Error(\"Child is already in: \" + child);\n      }\n\n      if (child.__root) {\n        throw new Error(\"Root elements could not be inserted into other ones.\");\n      }\n\n      // Remove from previous parent\n      if (child.__parent) {\n        child.__parent.remove(child);\n      }\n\n      // Convert to child of this object\n      child.__parent = this;\n\n      // Prepare array\n      if (!this.__children) {\n        this.__children = [];\n      }\n\n      // Schedule children update\n      if (this.__element) {\n        this._scheduleChildrenUpdate();\n      }\n    },\n\n\n    /**\n     * Internal helper for all children removal needs\n     *\n     * @param child {qx.html.Element} the removed element\n     * @throws {Error} if the given element is not a child\n     *     of this element\n     */\n    __removeChildHelper : function(child)\n    {\n      if (child.__parent !== this) {\n        throw new Error(\"Has no child: \" + child);\n      }\n\n      // Schedule children update\n      if (this.__element) {\n        this._scheduleChildrenUpdate();\n      }\n\n      // Remove reference to old parent\n      delete child.__parent;\n    },\n\n\n    /**\n     * Internal helper for all children move needs\n     *\n     * @param child {qx.html.Element} the moved element\n     * @throws {Error} if the given element is not a child\n     *     of this element\n     */\n    __moveChildHelper : function(child)\n    {\n      if (child.__parent !== this) {\n        throw new Error(\"Has no child: \" + child);\n      }\n\n      // Schedule children update\n      if (this.__element) {\n        this._scheduleChildrenUpdate();\n      }\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      CHILDREN MANAGEMENT (EXECUTED ON THE PARENT)\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Returns a copy of the internal children structure.\n     *\n     * Please do not modify the array in place. If you need\n     * to work with the data in such a way make yourself\n     * a copy of the data first.\n     *\n     * @return {Array} the children list\n     */\n    getChildren : function() {\n      return this.__children || null;\n    },\n\n\n    /**\n     * Get a child element at the given index\n     *\n     * @param index {Integer} child index\n     * @return {qx.html.Element|null} The child element or <code>null</code> if\n     *     no child is found at that index.\n     */\n    getChild : function(index)\n    {\n      var children = this.__children;\n      return children && children[index] || null;\n    },\n\n\n    /**\n     * Returns whether the element has any child nodes\n     *\n     * @return {Boolean} Whether the element has any child nodes\n     */\n    hasChildren : function()\n    {\n      var children = this.__children;\n      return children && children[0] !== undefined;\n    },\n\n\n    /**\n     * Find the position of the given child\n     *\n     * @param child {qx.html.Element} the child\n     * @return {Integer} returns the position. If the element\n     *     is not a child <code>-1</code> will be returned.\n     */\n    indexOf : function(child)\n    {\n      var children = this.__children;\n      return children ? children.indexOf(child) : -1;\n    },\n\n\n    /**\n     * Whether the given element is a child of this element.\n     *\n     * @param child {qx.html.Element} the child\n     * @return {Boolean} Returns <code>true</code> when the given\n     *    element is a child of this element.\n     */\n    hasChild : function(child)\n    {\n      var children = this.__children;\n      return children && children.indexOf(child) !== -1;\n    },\n\n\n    /**\n     * Append all given children at the end of this element.\n     *\n     * @param varargs {qx.html.Element} elements to insert\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    add : function(varargs)\n    {\n      if (arguments[1])\n      {\n        for (var i=0, l=arguments.length; i<l; i++) {\n          this.__addChildHelper(arguments[i]);\n        }\n\n        this.__children.push.apply(this.__children, arguments);\n      }\n      else\n      {\n        this.__addChildHelper(varargs);\n        this.__children.push(varargs);\n      }\n\n      // Chaining support\n      return this;\n    },\n\n\n    /**\n     * Inserts a new element into this element at the given position.\n     *\n     * @param child {qx.html.Element} the element to insert\n     * @param index {Integer} the index (starts at 0 for the\n     *     first child) to insert (the index of the following\n     *     children will be increased by one)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    addAt : function(child, index)\n    {\n      this.__addChildHelper(child);\n      qx.lang.Array.insertAt(this.__children, child, index);\n\n      // Chaining support\n      return this;\n    },\n\n\n    /**\n     * Removes all given children\n     *\n     * @param childs {qx.html.Element} children to remove\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    remove : function(childs)\n    {\n      var children = this.__children;\n      if (!children) {\n        return this;\n      }\n\n      if (arguments[1])\n      {\n        var child;\n        for (var i=0, l=arguments.length; i<l; i++)\n        {\n          child = arguments[i];\n\n          this.__removeChildHelper(child);\n          qx.lang.Array.remove(children, child);\n        }\n      }\n      else\n      {\n        this.__removeChildHelper(childs);\n        qx.lang.Array.remove(children, childs);\n      }\n\n      // Chaining support\n      return this;\n    },\n\n\n    /**\n     * Removes the child at the given index\n     *\n     * @param index {Integer} the position of the\n     *     child (starts at 0 for the first child)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    removeAt : function(index)\n    {\n      var children = this.__children;\n      if (!children) {\n        throw new Error(\"Has no children!\");\n      }\n\n      var child = children[index];\n      if (!child) {\n        throw new Error(\"Has no child at this position!\");\n      }\n\n      this.__removeChildHelper(child);\n      qx.lang.Array.removeAt(this.__children, index);\n\n      // Chaining support\n      return this;\n    },\n\n\n    /**\n     * Remove all children from this element.\n     *\n     * @return {qx.html.Element} A reference to this.\n     */\n    removeAll : function()\n    {\n      var children = this.__children;\n      if (children)\n      {\n        for (var i=0, l=children.length; i<l; i++) {\n          this.__removeChildHelper(children[i]);\n        }\n\n        // Clear array\n        children.length = 0;\n      }\n\n      // Chaining support\n      return this;\n    },\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      CHILDREN MANAGEMENT (EXECUTED ON THE CHILD)\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Returns the parent of this element.\n     *\n     * @return {qx.html.Element|null} The parent of this element\n     */\n    getParent : function() {\n      return this.__parent || null;\n    },\n\n\n    /**\n     * Insert self into the given parent. Normally appends self to the end,\n     * but optionally a position can be defined. With index <code>0</code> it\n     * will be inserted at the begin.\n     *\n     * @param parent {qx.html.Element} The new parent of this element\n     * @param index {Integer?null} Optional position\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    insertInto : function(parent, index)\n    {\n      parent.__addChildHelper(this);\n\n      if (index == null) {\n        parent.__children.push(this);\n      } else {\n        qx.lang.Array.insertAt(this.__children, this, index);\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Insert self before the given (related) element\n     *\n     * @param rel {qx.html.Element} the related element\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    insertBefore : function(rel)\n    {\n      var parent = rel.__parent;\n\n      parent.__addChildHelper(this);\n      qx.lang.Array.insertBefore(parent.__children, this, rel);\n\n      return this;\n    },\n\n\n    /**\n     * Insert self after the given (related) element\n     *\n     * @param rel {qx.html.Element} the related element\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    insertAfter : function(rel)\n    {\n      var parent = rel.__parent;\n\n      parent.__addChildHelper(this);\n      qx.lang.Array.insertAfter(parent.__children, this, rel);\n\n      return this;\n    },\n\n\n    /**\n     * Move self to the given index in the current parent.\n     *\n     * @param index {Integer} the index (starts at 0 for the first child)\n     * @return {qx.html.Element} this object (for chaining support)\n     * @throws {Error} when the given element is not child\n     *      of this element.\n     */\n    moveTo : function(index)\n    {\n      var parent = this.__parent;\n\n      parent.__moveChildHelper(this);\n\n      var oldIndex = parent.__children.indexOf(this);\n\n      if (oldIndex === index) {\n        throw new Error(\"Could not move to same index!\");\n      } else if (oldIndex < index) {\n        index--;\n      }\n\n      qx.lang.Array.removeAt(parent.__children, oldIndex);\n      qx.lang.Array.insertAt(parent.__children, this, index);\n\n      return this;\n    },\n\n\n    /**\n     * Move self before the given (related) child.\n     *\n     * @param rel {qx.html.Element} the related child\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    moveBefore : function(rel)\n    {\n      var parent = this.__parent;\n      return this.moveTo(parent.__children.indexOf(rel));\n    },\n\n\n    /**\n     * Move self after the given (related) child.\n     *\n     * @param rel {qx.html.Element} the related child\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    moveAfter : function(rel)\n    {\n      var parent = this.__parent;\n      return this.moveTo(parent.__children.indexOf(rel) + 1);\n    },\n\n\n    /**\n     * Remove self from the current parent.\n     *\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    free : function()\n    {\n      var parent = this.__parent;\n      if (!parent) {\n        throw new Error(\"Has no parent to remove from.\");\n      }\n\n      if (!parent.__children) {\n        return this;\n      }\n\n      parent.__removeChildHelper(this);\n      qx.lang.Array.remove(parent.__children, this);\n\n      return this;\n    },\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      DOM ELEMENT ACCESS\n    ---------------------------------------------------------------------------\n    */\n    \n    /**\n     * Returns the DOM element (if created). Please use this with caution.\n     * It is better to make all changes to the object itself using the public\n     * API rather than to the underlying DOM element.\n     *\n     * @return {Element|null} The DOM element node, if available.\n     */\n    getDomElement : function() {\n      return this.__element || null;\n    },\n\n\n    /**\n     * Returns the nodeName of the DOM element.\n     *\n     * @return {String} The node name\n     */\n    getNodeName : function() {\n      return this.__nodeName;\n    },\n\n    /**\n     * Sets the nodeName of the DOM element.\n     *\n     * @param name {String} The node name\n     */\n    setNodeName : function(name) {\n      this.__nodeName = name;\n    },\n\n    /**\n     * Sets the element's root flag, which indicates\n     * whether the element should be a root element or not.\n     * @param root {Boolean} The root flag.\n     */\n    setRoot : function(root) {\n      this.__root = root;\n    },\n\n    /**\n     * Uses existing markup for this element. This is mainly used\n     * to insert pre-built markup blocks into the element hierarchy.\n     *\n     * @param html {String} HTML markup with one root element\n     *   which is used as the main element for this instance.\n     * @return {Element} The created DOM element\n     */\n    useMarkup : function(html)\n    {\n      if (this.__element) {\n        throw new Error(\"Could not overwrite existing element!\");\n      }\n\n      // Prepare extraction\n      // We have a IE specific issue with \"Unknown error\" messages\n      // when we try to use the same DOM node again. I am not sure\n      // why this happens. Would be a good performance improvement,\n      // but does not seem to work.\n      if (qx.core.Environment.get(\"engine.name\") == \"mshtml\") {\n        var helper = document.createElement(\"div\");\n      } else {\n        var helper = qx.dom.Element.getHelperElement();\n      }\n\n      // Extract first element\n      helper.innerHTML = html;\n      this.useElement(helper.firstChild);\n\n      return this.__element;\n    },\n\n\n    /**\n     * Uses an existing element instead of creating one. This may be interesting\n     * when the DOM element is directly needed to add content etc.\n     *\n     * @param elem {Element} Element to reuse\n     */\n    useElement : function(elem)\n    {\n      if (this.__element) {\n        throw new Error(\"Could not overwrite existing element!\");\n      }\n\n      // Use incoming element\n      this.__connectDomElement(elem);\n\n      // Copy currently existing data over to element\n      this._copyData(true);\n    },\n\n\n    /**\n     * Whether the element is focusable (or will be when created)\n     *\n     * @return {Boolean} <code>true</code> when the element is focusable.\n     */\n    isFocusable : function()\n    {\n      var tabIndex = this.getAttribute(\"tabIndex\");\n      if (tabIndex >= 1) {\n        return true;\n      }\n\n      var focusable = qx.event.handler.Focus.FOCUSABLE_ELEMENTS;\n      if (tabIndex >= 0 && focusable[this.__nodeName]) {\n        return true;\n      }\n\n      return false;\n    },\n\n\n    /**\n     * Set whether the element is selectable. It uses the qooxdoo attribute\n     * qxSelectable with the values 'on' or 'off'.\n     * In webkit, a special css property will be used (-webkit-user-select).\n     *\n     * @param value {Boolean} True, if the element should be selectable.\n     */\n    setSelectable : function(value)\n    {\n      this.setAttribute(\"qxSelectable\", value ? \"on\" : \"off\");\n      var userSelect = qx.core.Environment.get(\"css.userselect\");\n      if (userSelect) {\n        this.setStyle(userSelect, value ? \"text\" :\n          qx.core.Environment.get(\"css.userselect.none\"));\n      }\n    },\n\n\n    /**\n     * Whether the element is natively focusable (or will be when created)\n     *\n     * This ignores the configured tabIndex.\n     *\n     * @return {Boolean} <code>true</code> when the element is focusable.\n     */\n    isNativelyFocusable : function() {\n      return !!qx.event.handler.Focus.FOCUSABLE_ELEMENTS[this.__nodeName];\n    },\n\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EXCLUDE SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Marks the element as included which means it will be moved into\n     * the DOM again and synced with the internal data representation.\n     *\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    include : function()\n    {\n      if (this.__included) {\n        return this;\n      }\n\n      delete this.__included;\n\n      if (this.__parent) {\n        this.__parent._scheduleChildrenUpdate();\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Marks the element as excluded which means it will be removed\n     * from the DOM and ignored for updates until it gets included again.\n     *\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    exclude : function()\n    {\n      if (!this.__included) {\n        return this;\n      }\n\n      this.__included = false;\n\n      if (this.__parent) {\n        this.__parent._scheduleChildrenUpdate();\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Whether the element is part of the DOM\n     *\n     * @return {Boolean} Whether the element is part of the DOM.\n     */\n    isIncluded : function() {\n      return this.__included === true;\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      ANIMATION SUPPORT\n    ---------------------------------------------------------------------------\n    */\n    /**\n     * Fades in the element.\n     * @param duration {Number} Time in ms.\n     * @return {qx.bom.element.AnimationHandle} The animation handle to react for\n     *   the fade animation.\n     */\n    fadeIn : function(duration) {\n      var col = qxWeb(this.__element);\n      if (col.isPlaying()) {\n        col.stop();\n      }\n      // create the element right away\n      if (!this.__element) {\n        this.__flush();\n        col.push(this.__element);\n      }\n      if (this.__element) {\n        col.fadeIn(duration).once(\"animationEnd\", function() {\n          this.show();\n          qx.html.Element.flush();\n        }, this);\n        return col.getAnimationHandles()[0];\n      }\n    },\n\n\n    /**\n     * Fades out the element.\n     * @param duration {Number} Time in ms.\n     * @return {qx.bom.element.AnimationHandle} The animation handle to react for\n     *   the fade animation.\n     */\n    fadeOut : function(duration) {\n      var col = qxWeb(this.__element);\n      if (col.isPlaying()) {\n        col.stop();\n      }\n\n      if (this.__element) {\n        col.fadeOut(duration).once(\"animationEnd\", function() {\n          this.hide();\n          qx.html.Element.flush();\n        }, this);\n        return col.getAnimationHandles()[0];\n      }\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      VISIBILITY SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Marks the element as visible which means that a previously applied\n     * CSS style of display=none gets removed and the element will inserted\n     * into the DOM, when this had not already happened before.\n     *\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    show : function()\n    {\n      if (this.__visible) {\n        return this;\n      }\n\n      if (this.__element)\n      {\n        qx.html.Element._visibility[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      // Must be sure that the element gets included into the DOM.\n      if (this.__parent) {\n        this.__parent._scheduleChildrenUpdate();\n      }\n\n      delete this.__visible;\n      return this;\n    },\n\n\n    /**\n     * Marks the element as hidden which means it will kept in DOM (if it\n     * is already there, but configured hidden using a CSS style of display=none).\n     *\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    hide : function()\n    {\n      if (!this.__visible) {\n        return this;\n      }\n\n      if (this.__element)\n      {\n        qx.html.Element._visibility[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      this.__visible = false;\n      return this;\n    },\n\n\n    /**\n     * Whether the element is visible.\n     *\n     * Please note: This does not control the visibility or parent inclusion recursively.\n     *\n     * @return {Boolean} Returns <code>true</code> when the element is configured\n     *   to be visible.\n     */\n    isVisible : function() {\n      return this.__visible === true;\n    },\n\n\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      SCROLL SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Scrolls the given child element into view. Only scrolls children.\n     * Do not influence elements on top of this element.\n     *\n     * If the element is currently invisible it gets scrolled automatically\n     * at the next time it is visible again (queued).\n     *\n     * @param elem {qx.html.Element} The element to scroll into the viewport.\n     * @param align {String?null} Alignment of the element. Allowed values:\n     *   <code>left</code> or <code>right</code>. Could also be null.\n     *   Without a given alignment the method tries to scroll the widget\n     *   with the minimum effort needed.\n     * @param direct {Boolean?true} Whether the execution should be made\n     *   directly when possible\n     */\n    scrollChildIntoViewX : function(elem, align, direct)\n    {\n      var thisEl = this.__element;\n      var childEl = elem.getDomElement();\n\n      if (direct !== false && thisEl && thisEl.offsetWidth && childEl && childEl.offsetWidth)\n      {\n        qx.bom.element.Scroll.intoViewX(childEl, thisEl, align);\n      }\n      else\n      {\n        this.__lazyScrollIntoViewX =\n        {\n          element : elem,\n          align : align\n        };\n\n        qx.html.Element._scroll[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      delete this.__lazyScrollX;\n    },\n\n\n    /**\n     * Scrolls the given child element into view. Only scrolls children.\n     * Do not influence elements on top of this element.\n     *\n     * If the element is currently invisible it gets scrolled automatically\n     * at the next time it is visible again (queued).\n     *\n     * @param elem {qx.html.Element} The element to scroll into the viewport.\n     * @param align {String?null} Alignment of the element. Allowed values:\n     *   <code>top</code> or <code>bottom</code>. Could also be null.\n     *   Without a given alignment the method tries to scroll the widget\n     *   with the minimum effort needed.\n     * @param direct {Boolean?true} Whether the execution should be made\n     *   directly when possible\n     */\n    scrollChildIntoViewY : function(elem, align, direct)\n    {\n      var thisEl = this.__element;\n      var childEl = elem.getDomElement();\n\n      if (direct !== false && thisEl && thisEl.offsetWidth && childEl && childEl.offsetWidth)\n      {\n        qx.bom.element.Scroll.intoViewY(childEl, thisEl, align);\n      }\n      else\n      {\n        this.__lazyScrollIntoViewY =\n        {\n          element : elem,\n          align : align\n        };\n\n        qx.html.Element._scroll[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      delete this.__lazyScrollY;\n    },\n\n\n    /**\n     * Scrolls the element to the given left position.\n     *\n     * @param x {Integer} Horizontal scroll position\n     * @param lazy {Boolean?false} Whether the scrolling should be performed\n     *    during element flush.\n     */\n    scrollToX : function(x, lazy)\n    {\n      var thisEl = this.__element;\n      if (lazy !== true && thisEl && thisEl.offsetWidth)\n      {\n        thisEl.scrollLeft = x;\n        delete this.__lazyScrollX;\n      }\n      else\n      {\n        this.__lazyScrollX = x;\n        qx.html.Element._scroll[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      delete this.__lazyScrollIntoViewX;\n    },\n\n\n    /**\n     * Get the horizontal scroll position.\n     *\n     * @return {Integer} Horizontal scroll position\n     */\n    getScrollX : function()\n    {\n      var thisEl = this.__element;\n      if (thisEl) {\n        return thisEl.scrollLeft;\n      }\n\n      return this.__lazyScrollX || 0;\n    },\n\n\n    /**\n     * Scrolls the element to the given top position.\n     *\n     * @param y {Integer} Vertical scroll position\n     * @param lazy {Boolean?false} Whether the scrolling should be performed\n     *    during element flush.\n     */\n    scrollToY : function(y, lazy)\n    {\n      var thisEl = this.__element;\n      if (lazy !== true && thisEl && thisEl.offsetWidth)\n      {\n        thisEl.scrollTop = y;\n        delete this.__lazyScrollY;\n      }\n      else\n      {\n        this.__lazyScrollY = y;\n        qx.html.Element._scroll[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      delete this.__lazyScrollIntoViewY;\n    },\n\n\n    /**\n     * Get the vertical scroll position.\n     *\n     * @return {Integer} Vertical scroll position\n     */\n    getScrollY : function()\n    {\n      var thisEl = this.__element;\n      if (thisEl) {\n        return thisEl.scrollTop;\n      }\n\n      return this.__lazyScrollY || 0;\n    },\n\n\n    /**\n     * Disables browser-native scrolling\n     */\n    disableScrolling : function()\n    {\n      this.enableScrolling();\n      this.scrollToX(0);\n      this.scrollToY(0);\n      this.addListener(\"scroll\", this.__onScroll, this);\n    },\n\n\n    /**\n     * Re-enables browser-native scrolling\n     */\n    enableScrolling : function() {\n      this.removeListener(\"scroll\", this.__onScroll, this);\n    },\n\n\n    __inScroll : null,\n\n    /**\n     * Handler for the scroll-event\n     *\n     * @param e {qx.event.type.Native} scroll-event\n     */\n    __onScroll : function(e)\n    {\n      if (!this.__inScroll)\n      {\n        this.__inScroll = true;\n        this.__element.scrollTop = 0;\n        this.__element.scrollLeft = 0;\n        delete this.__inScroll;\n      }\n    },\n\n\n    /*\n    ---------------------------------------------------------------------------\n      TEXT SELECTION SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Get the selection of the element.\n     *\n     * If the underlaying DOM element is not yet created, this methods returns\n     * a null value.\n     *\n     * @return {String|null}\n     */\n    getTextSelection : function()\n    {\n      var el = this.__element;\n      if (el) {\n        return qx.bom.Selection.get(el);\n      }\n\n      return null;\n    },\n\n\n    /**\n     * Get the length of selection of the element.\n     *\n     * If the underlaying DOM element is not yet created, this methods returns\n     * a null value.\n     *\n     * @return {Integer|null}\n     */\n    getTextSelectionLength : function()\n    {\n      var el = this.__element;\n      if (el) {\n        return qx.bom.Selection.getLength(el);\n      }\n\n      return null;\n    },\n\n\n    /**\n     * Get the start of the selection of the element.\n     *\n     * If the underlaying DOM element is not yet created, this methods returns\n     * a null value.\n     *\n     * @return {Integer|null}\n     */\n    getTextSelectionStart : function()\n    {\n      var el = this.__element;\n      if (el) {\n        return qx.bom.Selection.getStart(el);\n      }\n\n      return null;\n    },\n\n\n    /**\n     * Get the end of the selection of the element.\n     *\n     * If the underlaying DOM element is not yet created, this methods returns\n     * a null value.\n     *\n     * @return {Integer|null}\n     */\n    getTextSelectionEnd : function()\n    {\n      var el = this.__element;\n      if (el) {\n        return qx.bom.Selection.getEnd(el);\n      }\n\n      return null;\n    },\n\n\n    /**\n     * Set the selection of the element with the given start and end value.\n     * If no end value is passed the selection will extend to the end.\n     *\n     * This method only works if the underlying DOM element is already created.\n     *\n     * @param start {Integer} start of the selection (zero based)\n     * @param end {Integer} end of the selection\n     */\n    setTextSelection : function(start, end)\n    {\n      var el = this.__element;\n      if (el) {\n        qx.bom.Selection.set(el, start, end);\n        return;\n      }\n\n      // if element not created, save the selection for flushing\n      qx.html.Element.__selection[this.toHashCode()] = {\n        element : this,\n        start : start,\n        end : end\n      };\n      qx.html.Element._scheduleFlush(\"element\");\n    },\n\n\n    /**\n     * Clears the selection of the element.\n     *\n     * This method only works if the underlying DOM element is already created.\n     *\n     */\n    clearTextSelection : function()\n    {\n      var el = this.__element;\n      if (el) {\n        qx.bom.Selection.clear(el);\n      }\n      delete qx.html.Element.__selection[this.toHashCode()];\n    },\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      FOCUS/ACTIVATE SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Takes the action to process as argument and queues this action if the\n     * underlying DOM element is not yet created.\n     *\n     * @param action {String} action to queue\n     * @param args {Array} optional list of arguments for the action\n     */\n    __performAction : function(action, args)\n    {\n      var actions = qx.html.Element._actions;\n\n      actions.push({\n        type: action,\n        element: this,\n        args: args || []\n      });\n      qx.html.Element._scheduleFlush(\"element\");\n    },\n\n\n    /**\n     * Focus this element.\n     *\n     * If the underlaying DOM element is not yet created, the\n     * focus is queued for processing after the element creation.\n     *\n     */\n    focus : function() {\n      this.__performAction(\"focus\");\n    },\n\n\n    /**\n     * Mark this element to get blurred on the next flush of the queue\n     *\n     */\n    blur : function() {\n      this.__performAction(\"blur\");\n    },\n\n\n    /**\n     * Mark this element to get activated on the next flush of the queue\n     *\n     */\n    activate : function() {\n      this.__performAction(\"activate\");\n    },\n\n\n    /**\n     * Mark this element to get deactivated on the next flush of the queue\n     *\n     */\n    deactivate : function() {\n      this.__performAction(\"deactivate\");\n    },\n\n\n    /**\n     * Captures all mouse events to this element\n     *\n     * @param containerCapture {Boolean?true} If true all events originating in\n     *   the container are captured. If false events originating in the container\n     *   are not captured.\n     */\n    capture : function(containerCapture) {\n      this.__performAction(\"capture\", [containerCapture !== false]);\n    },\n\n\n    /**\n     * Releases this element from a previous {@link #capture} call\n     */\n    releaseCapture : function() {\n      this.__performAction(\"releaseCapture\");\n    },\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      STYLE SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Set up the given style attribute\n     *\n     * @param key {String} the name of the style attribute\n     * @param value {var} the value\n     * @param direct {Boolean?false} Whether the value should be applied\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    setStyle : function(key, value, direct)\n    {\n      if (!this.__styleValues) {\n        this.__styleValues = {};\n      }\n\n      if (this.__styleValues[key] == value) {\n        return this;\n      }\n\n      if (value == null) {\n        delete this.__styleValues[key];\n      } else {\n        this.__styleValues[key] = value;\n      }\n\n      // Uncreated elements simply copy all data\n      // on creation. We don't need to remember any\n      // jobs. It is a simple full list copy.\n      if (this.__element)\n      {\n        // Omit queuing in direct mode\n        if (direct)\n        {\n          qx.bom.element.Style.set(this.__element, key, value);\n          return this;\n        }\n\n        // Dynamically create if needed\n        if (!this.__styleJobs) {\n          this.__styleJobs = {};\n        }\n\n        // Store job info\n        this.__styleJobs[key] = true;\n\n        // Register modification\n        qx.html.Element._modified[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Convenience method to modify a set of styles at once.\n     *\n     * @param map {Map} a map where the key is the name of the property\n     *    and the value is the value to use.\n     * @param direct {Boolean?false} Whether the values should be applied\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    setStyles : function(map, direct)\n    {\n      // inline calls to \"set\" because this method is very\n      // performance critical!\n\n      var Style = qx.bom.element.Style;\n\n      if (!this.__styleValues) {\n        this.__styleValues = {};\n      }\n\n      if (this.__element)\n      {\n        // Dynamically create if needed\n        if (!this.__styleJobs) {\n          this.__styleJobs = {};\n        }\n\n        for (var key in map)\n        {\n          var value = map[key];\n          if (this.__styleValues[key] == value) {\n            continue;\n          }\n\n          if (value == null) {\n            delete this.__styleValues[key];\n          } else {\n            this.__styleValues[key] = value;\n          }\n\n          // Omit queuing in direct mode\n          if (direct)\n          {\n            Style.set(this.__element, key, value);\n            continue;\n          }\n\n          // Store job info\n          this.__styleJobs[key] = true;\n        }\n\n        // Register modification\n        qx.html.Element._modified[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n      else\n      {\n        for (var key in map)\n        {\n          var value = map[key];\n          if (this.__styleValues[key] == value) {\n            continue;\n          }\n\n          if (value == null) {\n            delete this.__styleValues[key];\n          } else {\n            this.__styleValues[key] = value;\n          }\n        }\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Removes the given style attribute\n     *\n     * @param key {String} the name of the style attribute\n     * @param direct {Boolean?false} Whether the value should be removed\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    removeStyle : function(key, direct) {\n      this.setStyle(key, null, direct);\n      return this;\n    },\n\n\n    /**\n     * Get the value of the given style attribute.\n     *\n     * @param key {String} name of the style attribute\n     * @return {var} the value of the style attribute\n     */\n    getStyle : function(key) {\n      return this.__styleValues ? this.__styleValues[key] : null;\n    },\n\n\n    /**\n     * Returns a map of all styles. Do not modify the result map!\n     *\n     * @return {Map} All styles or <code>null</code> when none are configured.\n     */\n    getAllStyles : function() {\n      return this.__styleValues || null;\n    },\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      ATTRIBUTE SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Set up the given attribute\n     *\n     * @param key {String} the name of the attribute\n     * @param value {var} the value\n     * @param direct {Boolean?false} Whether the value should be applied\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    setAttribute : function(key, value, direct)\n    {\n      if (!this.__attribValues) {\n        this.__attribValues = {};\n      }\n\n      if (this.__attribValues[key] == value) {\n        return this;\n      }\n\n      if (value == null) {\n        delete this.__attribValues[key];\n      } else {\n        this.__attribValues[key] = value;\n      }\n\n      // Uncreated elements simply copy all data\n      // on creation. We don't need to remember any\n      // jobs. It is a simple full list copy.\n      if (this.__element)\n      {\n        // Omit queuing in direct mode\n        if (direct)\n        {\n          qx.bom.element.Attribute.set(this.__element, key, value);\n          return this;\n        }\n\n        // Dynamically create if needed\n        if (!this.__attribJobs) {\n          this.__attribJobs = {};\n        }\n\n        // Store job info\n        this.__attribJobs[key] = true;\n\n        // Register modification\n        qx.html.Element._modified[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Convenience method to modify a set of attributes at once.\n     *\n     * @param map {Map} a map where the key is the name of the property\n     *    and the value is the value to use.\n     * @param direct {Boolean?false} Whether the values should be applied\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    setAttributes : function(map, direct)\n    {\n      for (var key in map) {\n        this.setAttribute(key, map[key], direct);\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Removes the given attribute\n     *\n     * @param key {String} the name of the attribute\n     * @param direct {Boolean?false} Whether the value should be removed\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    removeAttribute : function(key, direct) {\n      return this.setAttribute(key, null, direct);\n    },\n\n\n    /**\n     * Get the value of the given attribute.\n     *\n     * @param key {String} name of the attribute\n     * @return {var} the value of the attribute\n     */\n    getAttribute : function(key) {\n      return this.__attribValues ? this.__attribValues[key] : null;\n    },\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      CSS CLASS SUPPORT\n    ---------------------------------------------------------------------------\n    */\n    /**\n     * Adds a css class to the element.\n     * @param name {String} Name of the CSS class.\n     */\n    addClass : function(name) {\n      var value = ((this.getAttribute(\"class\") || \"\") + \" \" + name).trim();\n      this.setAttribute(\"class\", value);\n    },\n\n\n    /**\n     * Removes a CSS class from the current element.\n     * @param name {String} Name of the CSS class.\n     */\n    removeClass : function(name) {\n      var currentClass = this.getAttribute(\"class\");\n      if (currentClass) {\n        this.setAttribute(\"class\", (currentClass.replace(name, \"\")).trim());\n      }\n    },\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      PROPERTY SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Applies a special property with the given value.\n     *\n     * This property apply routine can be easily overwritten and\n     * extended by sub classes to add new low level features which\n     * are not easily possible using styles and attributes.\n     *\n     * @param name {String} Unique property identifier\n     * @param value {var} Any valid value (depends on the property)\n     * @return {qx.html.Element} this object (for chaining support)\n     * @abstract\n     */\n    _applyProperty : function(name, value) {\n      // empty implementation\n    },\n\n\n    /**\n     * Set up the given property.\n     *\n     * @param key {String} the name of the property\n     * @param value {var} the value\n     * @param direct {Boolean?false} Whether the value should be applied\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    _setProperty : function(key, value, direct)\n    {\n      if (!this.__propertyValues) {\n        this.__propertyValues = {};\n      }\n\n      if (this.__propertyValues[key] == value) {\n        return this;\n      }\n\n      if (value == null) {\n        delete this.__propertyValues[key];\n      } else {\n        this.__propertyValues[key] = value;\n      }\n\n      // Uncreated elements simply copy all data\n      // on creation. We don't need to remember any\n      // jobs. It is a simple full list copy.\n      if (this.__element)\n      {\n        // Omit queuing in direct mode\n        if (direct)\n        {\n          this._applyProperty(key, value);\n          return this;\n        }\n\n        // Dynamically create if needed\n        if (!this.__propertyJobs) {\n          this.__propertyJobs = {};\n        }\n\n        // Store job info\n        this.__propertyJobs[key] = true;\n\n        // Register modification\n        qx.html.Element._modified[this.$$hash] = this;\n        qx.html.Element._scheduleFlush(\"element\");\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Removes the given misc\n     *\n     * @param key {String} the name of the misc\n     * @param direct {Boolean?false} Whether the value should be removed\n     *    directly (without queuing)\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    _removeProperty : function(key, direct) {\n      return this._setProperty(key, null, direct);\n    },\n\n\n    /**\n     * Get the value of the given misc.\n     *\n     * @param key {String} name of the misc\n     * @return {var} the value of the misc\n     */\n    _getProperty : function(key)\n    {\n      var db = this.__propertyValues;\n      if (!db) {\n        return null;\n      }\n\n      var value = db[key];\n      return value == null ? null : value;\n    },\n\n\n\n\n\n    /*\n    ---------------------------------------------------------------------------\n      EVENT SUPPORT\n    ---------------------------------------------------------------------------\n    */\n\n    /**\n     * Adds an event listener to the element.\n     *\n     * @param type {String} Name of the event\n     * @param listener {Function} Function to execute on event\n     * @param self {Object ? null} Reference to the 'this' variable inside\n     *         the event listener. When not given, the corresponding dispatcher\n     *         usually falls back to a default, which is the target\n     *         by convention. Note this is not a strict requirement, i.e.\n     *         custom dispatchers can follow a different strategy.\n     * @param capture {Boolean ? false} Whether capturing should be enabled\n     * @return {var} An opaque id, which can be used to remove the event listener\n     *         using the {@link #removeListenerById} method.\n     */\n    addListener : function(type, listener, self, capture)\n    {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        var msg = \"Failed to add event listener for type '\" + type + \"'\" +\n          \" to the target '\" + this + \"': \";\n\n        this.assertString(type, msg + \"Invalid event type.\");\n        this.assertFunction(listener, msg + \"Invalid callback function\");\n\n        if (self !== undefined) {\n          this.assertObject(self, \"Invalid context for callback.\");\n        }\n\n        if (capture !== undefined) {\n          this.assertBoolean(capture, \"Invalid capture flag.\");\n        }\n      }\n\n      if (this.__element) {\n        return qx.event.Registration.addListener(this.__element, type, listener, self, capture);\n      }\n\n      if (!this.__eventValues) {\n        this.__eventValues = {};\n      }\n\n      if (capture == null) {\n        capture = false;\n      }\n\n      var unique = qx.event.Manager.getNextUniqueId();\n      var id = type + (capture ? \"|capture|\" : \"|bubble|\") + unique;\n\n      this.__eventValues[id] =\n      {\n        type : type,\n        listener : listener,\n        self : self,\n        capture : capture,\n        unique : unique\n      };\n\n      return id;\n    },\n\n\n    /**\n     * Removes an event listener from the element.\n     *\n     * @param type {String} Name of the event\n     * @param listener {Function} Function to execute on event\n     * @param self {Object} Execution context of given function\n     * @param capture {Boolean ? false} Whether capturing should be enabled\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    removeListener : function(type, listener, self, capture)\n    {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      if (qx.core.Environment.get(\"qx.debug\"))\n      {\n        var msg = \"Failed to remove event listener for type '\" + type + \"'\" +\n          \" from the target '\" + this + \"': \";\n\n        this.assertString(type, msg + \"Invalid event type.\");\n        this.assertFunction(listener, msg + \"Invalid callback function\");\n\n        if (self !== undefined) {\n          this.assertObject(self, \"Invalid context for callback.\");\n        }\n\n        if (capture !== undefined) {\n          this.assertBoolean(capture, \"Invalid capture flag.\");\n        }\n      }\n\n      if (this.__element)\n      {\n        if (listener.$$wrapped_callback && listener.$$wrapped_callback[type + this.$$hash]) {\n          var callback = listener.$$wrapped_callback[type + this.$$hash];\n          delete listener.$$wrapped_callback[type + this.$$hash];\n          listener = callback;\n        }\n        qx.event.Registration.removeListener(this.__element, type, listener, self, capture);\n      }\n      else\n      {\n        var values = this.__eventValues;\n        var entry;\n\n        if (capture == null) {\n          capture = false;\n        }\n\n        for (var key in values)\n        {\n          entry = values[key];\n\n          // Optimized for performance: Testing references first\n          if (entry.listener === listener && entry.self === self && entry.capture === capture && entry.type === type)\n          {\n            delete values[key];\n            break;\n          }\n        }\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Removes an event listener from an event target by an id returned by\n     * {@link #addListener}\n     *\n     * @param id {var} The id returned by {@link #addListener}\n     * @return {qx.html.Element} this object (for chaining support)\n     */\n    removeListenerById : function(id)\n    {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      if (this.__element) {\n        qx.event.Registration.removeListenerById(this.__element, id);\n      } else {\n        delete this.__eventValues[id];\n      }\n\n      return this;\n    },\n\n\n    /**\n     * Check if there are one or more listeners for an event type.\n     *\n     * @param type {String} name of the event type\n     * @param capture {Boolean ? false} Whether to check for listeners of\n     *         the bubbling or of the capturing phase.\n     * @return {Boolean} Whether the object has a listener of the given type.\n     */\n    hasListener : function(type, capture)\n    {\n      if (this.$$disposed) {\n        return false;\n      }\n\n      if (this.__element) {\n        return qx.event.Registration.hasListener(this.__element, type, capture);\n      }\n\n      var values = this.__eventValues;\n      var entry;\n\n      if (capture == null) {\n        capture = false;\n      }\n\n      for (var key in values)\n      {\n        entry = values[key];\n\n        // Optimized for performance: Testing fast types first\n        if (entry.capture === capture && entry.type === type) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n\n\n    /**\n     * Serializes and returns all event listeners attached to this element\n     * @return {Map[]} an Array containing a map for each listener. The maps\n     * have the following keys:\n     * <ul>\n     *   <li><code>type</code> (String): Event name</li>\n     *   <li><code>handler</code> (Function): Callback function</li>\n     *   <li><code>self</code> (Object): The callback's context</li>\n     *   <li><code>capture</code> (Boolean): If <code>true</code>, the listener is\n     * attached to the capturing phase</li>\n     * </ul>\n     */\n    getListeners : function() {\n      if (this.$$disposed) {\n        return null;\n      }\n\n      if (this.__element) {\n        return qx.event.Registration.getManager(this.__element).serializeListeners(this.__element);\n      }\n\n      var listeners = [];\n      for (var id in this.__eventValues) {\n        var listenerData = this.__eventValues[id];\n        listeners.push({\n          type: listenerData.type,\n          handler: listenerData.listener,\n          self: listenerData.self,\n          capture: listenerData.capture\n        });\n      }\n\n      return listeners;\n    }\n  },\n\n\n\n\n\n  /*\n  *****************************************************************************\n     DEFER\n  *****************************************************************************\n  */\n\n  defer : function(statics) {\n    statics.__deferredCall = new qx.util.DeferredCall(statics.flush, statics);\n  },\n\n\n\n\n\n  /*\n  *****************************************************************************\n     DESTRUCT\n  *****************************************************************************\n  */\n\n  destruct : function()\n  {\n    if (this.$$hash) {\n      delete qx.html.Element._modified[this.$$hash];\n      delete qx.html.Element._scroll[this.$$hash];\n    }\n\n    var el = this.__element;\n    if (el)\n    {\n      qx.event.Registration.getManager(el).removeAllListeners(el);\n      el.$$element = \"\";\n      delete el.$$elementObject;\n      el.$$widget = \"\";\n      delete el.$$widgetObject;\n    }\n\n    if (!qx.core.ObjectRegistry.inShutDown)\n    {\n      var parent = this.__parent;\n      if (parent && !parent.$$disposed) {\n        parent.remove(this);\n      }\n    }\n\n    this._disposeArray(\"__children\");\n\n    this.__attribValues = this.__styleValues = this.__eventValues =\n      this.__propertyValues = this.__attribJobs = this.__styleJobs =\n      this.__propertyJobs = this.__element = this.__parent =\n      this.__lazyScrollIntoViewX = this.__lazyScrollIntoViewY = null;\n  }\n});\n"
  ]
}